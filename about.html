<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Us - NASDAQ Sentiment Tracker</title>

    <!-- Translation System -->
    <script src="translations.js"></script>

    <!-- Clerk SDK -->
    <script
        async
        crossorigin="anonymous"
        data-clerk-publishable-key="pk_test_Zmxvd2luZy1naWJib24tNjUuY2xlcmsuYWNjb3VudHMuZGV2JA"
        src="https://flowing-gibbon-65.clerk.accounts.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
        type="text/javascript"
    ></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: black;
            min-height: 100vh;
            margin: 0;
            color: white;
            padding: 10px 0px;
        }

        .main-wrapper {
            width: 100%;
            max-width: 100%;
        }

        .container {
            width: 95%;
            display: grid;
            grid-template-columns: 1fr 3fr;
            grid-template-rows: minmax(0, 0.6fr) auto auto;
            row-gap: 25px;
            column-gap: 15px;
            margin: 0 auto;
        }

        .card {
            background: #282828;
            border-radius: 16px;
            padding: 22px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease;
        }

        .left-top {
            grid-column: 1;
            grid-row: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-top: 48px;
            padding-bottom: 48px;
            margin-top: 10px;
        }

        .right-top {
            grid-column: 2;
            grid-row: 1;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            align-items: center;
            margin-bottom: -14px;
        }

        .right-top-item {
            background: #282828;
            border-radius: 16px;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 70%;
            min-height: 56px;
        }

        .nav-link {
            color: #fff;
            font-size: 16px;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .nav-link:hover {
            color: #ccc;
        }

        .time-display {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .time-display:hover {
            opacity: 1;
        }

        .current-time {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.5px;
            color: #fff;
        }

        .timezone-chevron {
            font-size: 16px;
            color: #888;
            transition: transform 0.2s ease;
        }

        .time-display:hover .timezone-chevron {
            color: #ccc;
        }

        .timezone-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            padding: 8px;
            min-width: 420px;
            max-width: 500px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8);
            opacity: 1;
        }

        .timezone-dropdown.show {
            display: block;
        }

        .timezone-option {
            padding: 10px 14px;
            color: #ccc;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 4px;
            opacity: 1;
            background: transparent;
        }

        .timezone-option:hover {
            background: #2a2a2a;
            color: white;
        }

        .timezone-option.active {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            opacity: 1;
        }

        .timezone-option-main {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .timezone-option-offset {
            display: inline-block;
            min-width: 60px;
            color: #10b981;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }

        .timezone-option-code {
            display: inline-block;
            padding: 2px 6px;
            background: #0f0f0f;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 600;
            color: #888;
            font-family: 'Courier New', monospace;
            opacity: 1;
        }

        .timezone-option-datetime {
            font-size: 11px;
            color: #666;
            margin-left: 60px;
            font-family: 'Courier New', monospace;
        }

        .timezone-dropdown::-webkit-scrollbar {
            width: 8px;
        }

        .timezone-dropdown::-webkit-scrollbar-track {
            background: #0f0f0f;
            border-radius: 6px;
        }

        .timezone-dropdown::-webkit-scrollbar-thumb {
            background: #2a2a2a;
            border-radius: 6px;
        }

        .timezone-dropdown::-webkit-scrollbar-thumb:hover {
            background: #333;
        }

        .content-area {
            grid-column: 1 / -1;
            grid-row: 2;
            margin-top: 50px;
        }

        .content-card {
            background: #282828;
            border-radius: 16px;
            padding: 48px;
            width: 100%;
        }

        .about-title {
            font-size: 32px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 32px;
            text-align: center;
        }

        .about-section {
            margin-bottom: 40px;
        }

        .about-section:last-child {
            margin-bottom: 0;
        }

        .section-heading {
            font-size: 20px;
            font-weight: 600;
            color: #10b981;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            font-size: 24px;
        }

        .section-content {
            font-size: 16px;
            line-height: 1.8;
            color: #ccc;
            margin-bottom: 16px;
        }

        .section-content p {
            margin-bottom: 12px;
        }

        .section-content ul {
            list-style: none;
            padding-left: 0;
            margin-top: 12px;
        }

        .section-content li {
            padding: 12px 0;
            padding-left: 32px;
            position: relative;
        }

        .section-content li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #10b981;
            font-weight: 700;
        }

        .score-range {
            display: flex;
            gap: 16px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .score-badge {
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        .score-badge.bullish {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .score-badge.neutral {
            background: rgba(136, 136, 136, 0.1);
            color: #888;
            border: 1px solid rgba(136, 136, 136, 0.3);
        }

        .score-badge.bearish {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .highlight-box {
            background: #1a1a1a;
            border-left: 4px solid #10b981;
            padding: 20px;
            border-radius: 8px;
            margin-top: 16px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                height: auto;
            }

            .content-card {
                padding: 32px 24px;
            }

            .about-title {
                font-size: 24px;
            }

            .section-heading {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="main-wrapper">
        <div class="container">
            <!-- Left Top: Title -->
            <div class="card left-top">
                <div style="display: flex; align-items: center; justify-content: space-between; width: 100%; gap: 32px;">
                    <div style="text-align: left; flex: 1;">
                        <div style="font-size: 48px; font-weight: 700; color: #fff; line-height: 0.9; margin-bottom: 4px;">NASDAQ</div>
                        <div style="font-size: 25px; font-weight: 400; color: #fff; line-height: 0.9;">Sentiment Tracker</div>
                    </div>
                    <div style="width: 80px; height: 80px; background: #1a1a1a; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #666; font-size: 12px; border: 2px dashed #333;">
                        Logo
                    </div>
                </div>
            </div>

            <!-- Right Top: Navigation & Time -->
            <div class="right-top">
                <div class="right-top-item">
                    <a href="nasdaq.html" class="nav-link" data-i18n="nav.dashboard">Dashboard</a>
                </div>
                <div class="right-top-item">
                    <a href="news.html" class="nav-link" data-i18n="nav.news">News</a>
                </div>
                <div class="right-top-item">
                    <a href="#" class="nav-link" id="language-selector" data-i18n="nav.language">Language</a>
                </div>
                <div class="right-top-item">
                    <div class="time-display" id="timezone-selector" style="position: relative;">
                        <span class="current-time" id="current-time">09:45:32</span>
                        <span class="timezone-chevron">▼</span>
                        <div class="timezone-dropdown" id="timezone-dropdown">
                            <!-- Timezone options will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <div class="content-card">
                    <h1 class="about-title" data-i18n="about.page.title">About the NASDAQ Sentiment Tracker</h1>

                    <!-- What is This Tool -->
                    <div class="about-section">
                        <h2 class="section-heading">
                            <span class="section-icon">📊</span>
                            <span data-i18n="about.section1.title">What is the NASDAQ Sentiment Tracker?</span>
                        </h2>
                        <div class="section-content">
                            <p data-i18n="about.section1.text1">The NASDAQ Sentiment Tracker is a real-time dashboard that helps you understand how the market "feels" about the NASDAQ stock exchange. Instead of just looking at prices going up or down, we analyze multiple sources of information to give you a complete picture of market sentiment.</p>
                            <p data-i18n="about.section1.text2">Think of it as taking the temperature of the market. Our tool processes news articles, social media discussions, technical indicators, analyst recommendations, and market breadth data to create a single, easy-to-understand score that tells you whether the overall mood is positive, negative, or neutral.</p>
                        </div>
                    </div>

                    <!-- Understanding the Composite Score -->
                    <div class="about-section">
                        <h2 class="section-heading">
                            <span class="section-icon">🎯</span>
                            <span data-i18n="about.section2.title">Understanding the Composite Score</span>
                        </h2>
                        <div class="section-content">
                            <p data-i18n="about.section2.text1">The Composite Sentiment Score is the heart of our dashboard. It's a number between -100 and +100 that represents the overall market sentiment:</p>

                            <div class="score-range">
                                <div class="score-badge bullish">
                                    <div style="font-size: 18px; margin-bottom: 4px;">+30 to +100</div>
                                    <div style="font-size: 12px; opacity: 0.8;" data-i18n="about.section2.bullish">BULLISH</div>
                                    <div style="font-size: 11px; margin-top: 4px; opacity: 0.7;" data-i18n="about.section2.bullish.text">Positive market sentiment</div>
                                </div>
                                <div class="score-badge neutral">
                                    <div style="font-size: 18px; margin-bottom: 4px;">-30 to +30</div>
                                    <div style="font-size: 12px; opacity: 0.8;" data-i18n="about.section2.neutral">NEUTRAL</div>
                                    <div style="font-size: 11px; margin-top: 4px; opacity: 0.7;" data-i18n="about.section2.neutral.text">Mixed or balanced sentiment</div>
                                </div>
                                <div class="score-badge bearish">
                                    <div style="font-size: 18px; margin-bottom: 4px;">-100 to -30</div>
                                    <div style="font-size: 12px; opacity: 0.8;" data-i18n="about.section2.bearish">BEARISH</div>
                                    <div style="font-size: 11px; margin-top: 4px; opacity: 0.7;" data-i18n="about.section2.bearish.text">Negative market sentiment</div>
                                </div>
                            </div>

                            <div class="highlight-box">
                                <strong style="color: #10b981;" data-i18n="about.section2.important">Important:</strong> <span data-i18n="about.section2.important.text">The score updates automatically during market hours (9:30 AM - 4:00 PM ET) and reflects real-time changes in market sentiment as new data comes in.</span>
                            </div>
                        </div>
                    </div>

                    <!-- How We Calculate It -->
                    <div class="about-section">
                        <h2 class="section-heading">
                            <span class="section-icon">⚙️</span>
                            <span data-i18n="about.section3.title">How We Calculate the Score</span>
                        </h2>
                        <div class="section-content">
                            <p data-i18n="about.section3.text1">Our Composite Score combines five key "drivers" of market sentiment. Each driver is analyzed independently and then weighted to create the final score:</p>

                            <ul>
                                <li data-i18n="about.section3.driver1" data-i18n-html><strong>News Sentiment (40%)</strong> - We analyze financial news from major sources to determine if headlines are positive, negative, or neutral about the NASDAQ.</li>
                                <li data-i18n="about.section3.driver2" data-i18n-html><strong>Social Media (30%)</strong> - We monitor discussions on platforms like Twitter and Reddit to gauge retail investor sentiment and trending topics.</li>
                                <li data-i18n="about.section3.driver3" data-i18n-html><strong>Technical Indicators (30%)</strong> - We examine price movements, trading volumes, and technical patterns that professional traders watch.</li>
                                <li data-i18n="about.section3.driver4" data-i18n-html><strong>Analyst Recommendations</strong> - We track upgrades, downgrades, and target price changes from financial analysts.</li>
                                <li data-i18n="about.section3.driver5" data-i18n-html><strong>Market Breadth</strong> - We measure how many stocks are rising versus falling to understand overall market strength.</li>
                            </ul>

                            <p data-i18n="about.section3.text2">These drivers work together to give you a comprehensive view that goes beyond just price movements.</p>
                        </div>
                    </div>

                    <!-- How to Use This Tool -->
                    <div class="about-section">
                        <h2 class="section-heading">
                            <span class="section-icon">💡</span>
                            <span data-i18n="about.section4.title">How to Use This Tool</span>
                        </h2>
                        <div class="section-content">
                            <ul>
                                <li data-i18n="about.section4.item1" data-i18n-html><strong>Check the Composite Score</strong> - Start with the main sentiment score (left side of the dashboard) to get an instant read on market mood.</li>
                                <li data-i18n="about.section4.item2" data-i18n-html><strong>Review Sentiment Drivers</strong> - Look at the individual drivers to see what's influencing the overall score. Are all drivers aligned, or are some positive while others are negative?</li>
                                <li data-i18n="about.section4.item3" data-i18n-html><strong>Examine the Historical Trend</strong> - Use the chart at the bottom to see how sentiment has changed over the past few hours. Is it improving or deteriorating?</li>
                                <li data-i18n="about.section4.item4" data-i18n-html><strong>Adjust Timeframes</strong> - Click the timeframe buttons (1m, 5m, 15m, 30m, 1h) to see sentiment trends over different time periods.</li>
                                <li data-i18n="about.section4.item5" data-i18n-html><strong>Use Any Timezone</strong> - Click the time display in the top right to switch between different timezones for your convenience.</li>
                            </ul>

                            <div class="highlight-box">
                                <strong style="color: #10b981;" data-i18n="about.section4.protip">Pro Tip:</strong> <span data-i18n="about.section4.protip.text">This tool is most useful when combined with other research. Use it to confirm your trading ideas, spot sentiment shifts, or identify when the market mood might be changing direction.</span>
                            </div>
                        </div>
                    </div>

                    <!-- What This Tool Is NOT -->
                    <div class="about-section">
                        <h2 class="section-heading">
                            <span class="section-icon">⚠️</span>
                            <span data-i18n="about.section5.title">Important Disclaimer</span>
                        </h2>
                        <div class="section-content">
                            <p data-i18n="about.section5.text1" data-i18n-html>This tool provides market sentiment analysis for informational purposes only. It is <strong>not</strong> financial advice, and should not be your only source of information when making investment decisions.</p>
                            <p data-i18n="about.section5.text2">Market sentiment can change rapidly, and past sentiment does not predict future market movements. Always do your own research, consult with financial professionals, and consider your personal financial situation before making any investment decisions.</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // Clerk authentication check - redirect if not logged in
        window.addEventListener('load', async function() {
            try {
                // Wait for Clerk to be available
                if (!window.Clerk) {
                    // Wait a bit for async script to load
                    let retries = 0;
                    while (!window.Clerk && retries < 50) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                        retries++;
                    }
                    
                    if (!window.Clerk) {
                        console.error('Clerk SDK failed to load');
                        window.location.href = '/index.html';
                        return;
                    }
                }
                
                await window.Clerk.load();
                
                // Check if user is authenticated
                if (!window.Clerk.user) {
                    window.location.href = '/index.html';
                    return;
                }
            } catch (error) {
                console.error('Error loading Clerk:', error);
                // Redirect to index if Clerk fails to load
                window.location.href = '/index.html';
            }
        });

        // Timezone data embedded directly (to avoid CORS issues with local file access)
        const timezonesData = [
            {"offset": "-12:00", "name": "Baker Island Time", "code": "BIT"},
            {"offset": "-11:00", "name": "Samoa Standard Time", "code": "SST"},
            {"offset": "-10:00", "name": "Hawaii-Aleutian Standard Time", "code": "HST"},
            {"offset": "-09:30", "name": "Marquesas Islands Time", "code": "MART"},
            {"offset": "-09:00", "name": "Alaska Standard Time", "code": "AKST"},
            {"offset": "-08:00", "name": "Pacific Standard Time", "code": "PST"},
            {"offset": "-07:00", "name": "Mountain Standard Time", "code": "MST"},
            {"offset": "-06:00", "name": "Central Standard Time", "code": "CST"},
            {"offset": "-05:00", "name": "Eastern Standard Time", "code": "EST"},
            {"offset": "-04:00", "name": "Atlantic Standard Time", "code": "AST"},
            {"offset": "-03:30", "name": "Newfoundland Standard Time", "code": "NST"},
            {"offset": "-03:00", "name": "Argentina Time", "code": "ART"},
            {"offset": "-02:00", "name": "South Georgia Time", "code": "GST"},
            {"offset": "-01:00", "name": "Azores Standard Time", "code": "AZOST"},
            {"offset": "+00:00", "name": "Coordinated Universal Time", "code": "UTC"},
            {"offset": "+01:00", "name": "Central European Time", "code": "CET"},
            {"offset": "+02:00", "name": "Eastern European Time", "code": "EET"},
            {"offset": "+03:00", "name": "Moscow Standard Time", "code": "MSK"},
            {"offset": "+03:30", "name": "Iran Standard Time", "code": "IRST"},
            {"offset": "+04:00", "name": "Gulf Standard Time", "code": "GST"},
            {"offset": "+04:30", "name": "Afghanistan Time", "code": "AFT"},
            {"offset": "+05:00", "name": "Pakistan Standard Time", "code": "PKT"},
            {"offset": "+05:30", "name": "India Standard Time", "code": "IST"},
            {"offset": "+05:45", "name": "Nepal Time", "code": "NPT"},
            {"offset": "+06:00", "name": "Bangladesh Standard Time", "code": "BST"},
            {"offset": "+06:30", "name": "Myanmar Time", "code": "MMT"},
            {"offset": "+07:00", "name": "Indochina Time", "code": "ICT"},
            {"offset": "+08:00", "name": "China Standard Time", "code": "CST"},
            {"offset": "+08:45", "name": "Australian Central Western Standard Time", "code": "ACWST"},
            {"offset": "+09:00", "name": "Japan Standard Time", "code": "JST"},
            {"offset": "+09:30", "name": "Australian Central Standard Time", "code": "ACST"},
            {"offset": "+10:00", "name": "Australian Eastern Standard Time", "code": "AEST"},
            {"offset": "+10:30", "name": "Lord Howe Standard Time", "code": "LHST"},
            {"offset": "+11:00", "name": "Solomon Islands Time", "code": "SBT"},
            {"offset": "+12:00", "name": "New Zealand Standard Time", "code": "NZST"},
            {"offset": "+12:45", "name": "Chatham Islands Standard Time", "code": "CHAST"},
            {"offset": "+13:00", "name": "Tonga Time", "code": "TOT"},
            {"offset": "+14:00", "name": "Line Islands Time", "code": "LINT"}
        ];

        let currentTimezoneData = null;

        // Parse offset string to decimal hours (e.g., "-05:00" -> -5, "+05:30" -> 5.5)
        function parseOffset(offsetStr) {
            const sign = offsetStr.charAt(0) === '-' ? -1 : 1;
            const parts = offsetStr.substring(1).split(':');
            const hours = parseInt(parts[0]);
            const minutes = parseInt(parts[1]);
            return sign * (hours + minutes / 60);
        }

        // Format date and time for a given timezone
        function getTimezoneDateTime(offsetHours) {
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const localTime = new Date(utc + (3600000 * offsetHours));

            const year = localTime.getFullYear();
            const month = String(localTime.getMonth() + 1).padStart(2, '0');
            const day = String(localTime.getDate()).padStart(2, '0');
            const hours = String(localTime.getHours()).padStart(2, '0');
            const minutes = String(localTime.getMinutes()).padStart(2, '0');
            const seconds = String(localTime.getSeconds()).padStart(2, '0');

            return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
        }

        // Update the main clock display
        function updateTime() {
            if (!currentTimezoneData) {
                // Default to local time if no timezone selected
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                document.getElementById('current-time').textContent = `${hours}:${minutes}:${seconds}`;
                return;
            }

            const offsetHours = parseOffset(currentTimezoneData.offset);
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const localTime = new Date(utc + (3600000 * offsetHours));

            const hours = String(localTime.getHours()).padStart(2, '0');
            const minutes = String(localTime.getMinutes()).padStart(2, '0');
            const seconds = String(localTime.getSeconds()).padStart(2, '0');
            document.getElementById('current-time').textContent = `${hours}:${minutes}:${seconds}`;
        }

        // Initialize timezone system
        function loadTimezones() {
            // Set default timezone to EST
            currentTimezoneData = timezonesData.find(tz => tz.code === 'EST') || timezonesData[0];
            populateTimezoneDropdown();
            updateTime();
        }

        // Populate the timezone dropdown with all options
        function populateTimezoneDropdown() {
            const dropdown = document.getElementById('timezone-dropdown');
            if (!dropdown) return;

            dropdown.innerHTML = '';

            timezonesData.forEach((tz, index) => {
                const offsetHours = parseOffset(tz.offset);
                const dateTime = getTimezoneDateTime(offsetHours);

                const option = document.createElement('div');
                option.className = 'timezone-option';
                if (currentTimezoneData && currentTimezoneData.code === tz.code) {
                    option.classList.add('active');
                }

                option.innerHTML = `
                    <div class="timezone-option-main">
                        <span class="timezone-option-offset">${tz.offset}</span>
                        <span class="timezone-option-code">${tz.code}</span>
                        <span>${tz.name}</span>
                    </div>
                    <div class="timezone-option-datetime">${dateTime}</div>
                `;

                option.addEventListener('click', (e) => {
                    e.stopPropagation();
                    selectTimezone(tz);
                });

                dropdown.appendChild(option);
            });
        }

        // Select a timezone
        function selectTimezone(tz) {
            currentTimezoneData = tz;

            // Update active state
            document.querySelectorAll('.timezone-option').forEach(opt => opt.classList.remove('active'));
            event.currentTarget.classList.add('active');

            // Update time immediately
            updateTime();

            // Close dropdown
            document.getElementById('timezone-dropdown').classList.remove('show');
            document.getElementById('timezone-selector').classList.remove('open');
        }

        // Update dropdown times every second
        function updateDropdownTimes() {
            const options = document.querySelectorAll('.timezone-option');
            timezonesData.forEach((tz, index) => {
                if (options[index]) {
                    const offsetHours = parseOffset(tz.offset);
                    const dateTime = getTimezoneDateTime(offsetHours);
                    const dateTimeElem = options[index].querySelector('.timezone-option-datetime');
                    if (dateTimeElem) {
                        dateTimeElem.textContent = dateTime;
                    }
                }
            });
        }

        // Initialize timezones after DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            loadTimezones();
        });

        // Update time every second
        setInterval(() => {
            updateTime();
            // Only update dropdown times if dropdown is open
            const dropdown = document.getElementById('timezone-dropdown');
            if (dropdown && dropdown.classList.contains('show')) {
                updateDropdownTimes();
            }
        }, 1000);

        // Timezone dropdown toggle - initialize after DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            const timezoneSelector = document.getElementById('timezone-selector');
            const timezoneDropdown = document.getElementById('timezone-dropdown');

            if (timezoneSelector && timezoneDropdown) {
                timezoneSelector.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('timezone-option')) {
                        timezoneDropdown.classList.toggle('show');
                        timezoneSelector.classList.toggle('open');

                        // Update all dropdown times when opening
                        if (timezoneDropdown.classList.contains('show')) {
                            updateDropdownTimes();
                        }
                    }
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', (e) => {
                    if (!timezoneSelector.contains(e.target)) {
                        timezoneDropdown.classList.remove('show');
                        timezoneSelector.classList.remove('open');
                    }
                });
            }
        });

        // Language selector functionality
        document.addEventListener('DOMContentLoaded', () => {
            const languageSelector = document.getElementById('language-selector');
            if (languageSelector) {
                languageSelector.addEventListener('click', (e) => {
                    e.preventDefault();
                    showLanguageModal();
                });
            }
        });

        // Show language selection modal
        function showLanguageModal() {
            const languages = [
                { code: 'en', name: 'English', nativeName: 'English' },
                { code: 'es', name: 'Spanish', nativeName: 'Español' },
                { code: 'fr', name: 'French', nativeName: 'Français' },
                { code: 'de', name: 'German', nativeName: 'Deutsch' },
                { code: 'zh', name: 'Chinese', nativeName: '中文' },
                { code: 'ja', name: 'Japanese', nativeName: '日本語' }
            ];

            const currentLang = getCurrentLanguage();

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(4px);
                z-index: 10000; display: flex; align-items: center; justify-content: center;
            `;

            const content = document.createElement('div');
            content.style.cssText = `
                background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 16px;
                max-width: 500px; width: 90%; padding: 40px 48px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            `;

            const title = document.createElement('h2');
            title.textContent = 'Select Language';
            title.style.cssText = `
                font-size: 28px; font-weight: 700; color: #fff;
                margin-bottom: 24px; text-align: center;
            `;

            const langGrid = document.createElement('div');
            langGrid.style.cssText = `
                display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 24px;
            `;

            languages.forEach(lang => {
                const langBtn = document.createElement('div');
                langBtn.style.cssText = `
                    background: #0f0f0f; border: 2px solid ${lang.code === currentLang ? '#10b981' : '#2a2a2a'};
                    border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.2s ease;
                    display: flex; flex-direction: column; gap: 4px; text-align: center;
                `;

                langBtn.innerHTML = `
                    <div style="font-size: 16px; font-weight: 600; color: ${lang.code === currentLang ? '#10b981' : '#fff'};">${lang.nativeName}</div>
                    <div style="font-size: 12px; color: #888; text-transform: uppercase; letter-spacing: 1px;">${lang.code}</div>
                `;

                langBtn.addEventListener('mouseenter', () => {
                    if (lang.code !== currentLang) {
                        langBtn.style.background = '#1a1a1a';
                        langBtn.style.borderColor = '#333';
                    }
                });

                langBtn.addEventListener('mouseleave', () => {
                    if (lang.code !== currentLang) {
                        langBtn.style.background = '#0f0f0f';
                        langBtn.style.borderColor = '#2a2a2a';
                    }
                });

                langBtn.addEventListener('click', () => {
                    setLanguage(lang.code);
                    document.body.removeChild(modal);
                });

                langGrid.appendChild(langBtn);
            });

            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'Close';
            closeBtn.style.cssText = `
                width: 100%; padding: 14px 32px; background: #ffffff; color: #000000;
                border: none; border-radius: 12px; font-size: 16px; font-weight: 600;
                cursor: pointer; transition: all 0.2s ease; font-family: inherit;
            `;

            closeBtn.addEventListener('mouseenter', () => {
                closeBtn.style.background = '#e0e0e0';
            });

            closeBtn.addEventListener('mouseleave', () => {
                closeBtn.style.background = '#ffffff';
            });

            closeBtn.addEventListener('click', () => {
                document.body.removeChild(modal);
            });

            content.appendChild(title);
            content.appendChild(langGrid);
            content.appendChild(closeBtn);
            modal.appendChild(content);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });

            document.body.appendChild(modal);
        }
    </script>
</body>
</html>
